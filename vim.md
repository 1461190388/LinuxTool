Vim编辑器学习记录
===
|![](http://img.my.csdn.net/uploads/201406/15/1402811722_5338.png)|一句话：编辑器之神|
|-----|-----|

Vim的命令区分大小写!大部分命令能和数字组合使用，此时数字在命令前面,或是两个命令之间。

符号约定：当本文涉及组合键的时候，
- 如果是加号+，表示两个键先后按下（有时也省略加号）；
- 如果是减号-，表示两个键同时按下。
- 本文组合键中间无空格。

>授人以渔
>>在终端输入`vimtutor`可以进入vim使用教程。在vim编辑器中输入`:help vimrc-intro`可以进入vimrc文件的编辑教程

#Normal模式
Normal模式通称一般模式，是切换到其他两个模式的唯一入口
##退出vim
一般模式下，键入`ZZ`，注意是大写。
>如果文件未改动，则直接退出<br>
>如果文件被改动，则保存退出

##模式切换
###进入编辑模式
||描述|
|:--:|------|
|A|在光标所在行的行尾开始插入文本(Append)
|a|在光标的下一位开始插入文本
|i|在光标处开始插入文本(Instert)
|O|在光标所在行的上一行，插入新行开始编辑文本
|o|在光标所在行的下一行，插入新行开始编辑文本
|R|替换模式，从光标所指处开始替换文本,不是逐字符
|r|也具有替换功能，不同之处是只能替换光标所指处的那一个字符

###回到一般模式
按一下ESC即可
###撤销恢复
undo和redo命令分别为`u`和`Ctrl+r`

大写字母`U`可以一次性撤销该行的所有变动
>因为`r`具有替换的功能，所以redo要加一个Ctrl。

****
##光标移动
重点操作

|左  |下  |上  |右  |
|:--:|:--:|:--:|:--:|
| h  | j  | k  | j  |
这四个方向键都支持和数字组合使用，比如：

    30 j
可向下移动30行，30是相对行数。不是移动到第30行。
###向下移动n行
除了使用数字+j，还有快捷的方式是数字+回车，比如

    30 <Enter>
###向右移动n个字符
除了使用数字+l，还有快捷的方式是数字+空格，比如

    10 <Space>
###移动到第n行
- nG 

n为要移动的行号
###移至首行：
  - gg 
  - 1G

###移至尾行
   G
###移动到行首
* 功能键`<Home>`
* 数字键0

###移动到行尾
* 功能键`<End>`
* `$` 按键为Shift-4

###%跳转到配对括号
###跳回到上一次光标位置
* **``**（反引号两次，可来回切换）
* `<Ctrl>-o`：跳回上一次光标位置
* `<Ctril>-i`：在`<Ctrl>-o`之后使用，撤销跳回

>比如我在第5行，敲下**gg**来到首行，此时按下`<ctrl>`+o可以回到第5行，再次按下`<Ctrl>+i`可再次回到首行。  
而敲两次**``**，则可代替这两个组合键，在首行和第5行直接来回跳跃。

###跳转到编辑过的位置
* g, 顺序跳转回编辑过的位置
* g; 逆序跳转回编辑过的位置

###跳转到段落首、段落尾
* { 段落首，如果段落上面有空行则跳到空行开头
* } 段落尾最后一个字符处，如果段落后面有空行，则跳到空行开头

****
##文本处理
###剪切与删除
vim中所有的删除其实都是剪切，命令为：
* x
* d
* c

####x
删除单个字符，右边的文本左移一个字符
####d
**d命令可以理解为d+一个移动命令。移动命令能移到哪里，就能删到哪里！！**
|常用命令|描述|
|:--:|:--------|
|dd|剪切当前行,下一行向上移动|
|de|!剪切光标之后单词的剩余部分|
|dw|剪切光标之后单词的剩余部分|
|d$|剪切光标之后该行的剩余部分|
|dH|剪切光标所在行到屏幕顶行之间全部行|
|dL|剪切光标所在行到屏幕底行之间全部行|
|D|同d$|
>dw和de的区别是：dw会把两个单词间的空格也删掉，而de不会

>数字n+dd可以剪切n行，从光标所在行向下算起

####c
c功能和d相同，区别在于完成剪切后进入INSERT模式
cc功能同dd，区别在于完成剪切后进入INSERT模式

>每行删除第一个字符`:%s/^.//g`

###复制
yy

同理可以使用数字n+yy表示复制n行
###粘贴
粘贴都是在新行粘贴，不是覆盖粘贴
- p 粘贴到光标所在行下一行
- P 粘贴到光标所在行上一行

##重复上一次对文本进行的操作
用.

命令模式
==========
  又称命令行或指令列模式
##进入命令模式
键入：/ ？，光标移动到最下面一行，开启命令模式
##：
- 保存退出：wq
- 强制保存退出：wq！
###调用外部命令
`:!`然后再输入shell的命令即可直接在vim的界面调用shell命令。
##/和？
在一般模式下，键入`/`后，光标移动到最下面一行，显示一个/。这时可以进行文本的查找和替换。

    /tom
    /\<tom\>
前者当找到包含tom的单词时会高亮显示。后者只匹配tom这个单词时会高亮。
按键n为显示下一个(?时为上一个)。

`？`与其功能相同，唯一的不同之处是，`/`是向下查找，而`？`是向上查找。
##打开多窗口
`:new <文件名>`就能在一个新窗口里打开另一个文件。
##替换
`:%s/pattern/replace/gc`
pattern是要替换(查找)的模式串，replace是替换的结果。gc是两个选项
* g global 全局替换，无此选项则只会替换一行中的第一个匹配。
* c confirm 确认，在替换之前进行确认

##删除全部内容

    :%d

***
Visual模式
==========
Visual模式又分为三种visual模式
----------
|plain visual|block visual|linewise visual
|:----------:|:----------:|:----------:|
##plain visual（普通）
Normal模式下，键入`v`进入`plain visual`模式
##block visual（块选）
`Ctrl-v`进入`block visual`模式，该模式可以竖着选中一列或几列；
所有的操作也将作用于所有选中列。

|按键|描述|
|----|:----|
|A|追加，更新到所有行|
|c|剪切单个字符并进入插入模式|
|C|剪切整行并进入插入模式|
|d|剪切列|
|D|剪切选中行|
|I|插入|
|r|替换单个字符|
|R|替换选中行，与其他命令不同，不更新到所有行，而是替换成一行|

##linewise visual(行选)
Normal模式下，键入`V`(shift-v)进入`linewise visual`模式。  
Normal模式下，键入`]+d`可进入该模式，并选中光标所在行到尾行间所有行。

所有的操作都是以行为单位的，只关系光标所在行，而不关心光标所在位置。

其余用法同`plain visual`模式。

***
#程序员技巧
##函数相关的跳转
|按键|说明
|---|---
|[[|如果在函数体内，则跳到函数起始**{**处，如果已经再该位置则跳转到上一个函数的**{**处
|][|如果在函数体内，则跳到函数结尾**}**处，如果已经再该位置则跳转到下一个函数的**}**处
|]]|跳转到下一个函数的起始**{**处
|[]|跳到上一个函数的结尾**}**处

###宏，变量相关
|按键|说明
|---|---
|]+i|查看变量的定义
|[+d|查看宏的定义
|g+d|跳转到变量定义处

###查看man手册
在单词位置按**K**（`<shift>-k`）。

各种Tip
=======
##格式化文本
Normal模式下：`gg=G`
##录制宏
1. Normal模式下，按q+寄存器名开始录制,比如：`qa`
2. 再次按q结束录制。
3. 使用@+寄存器名执行该宏，比如：`@a`

##显示TAB
Normal模式下:`set list`  
然后TAB会显示成`^I`，并且行尾会显示`$`，从而看出行尾空格。
##ctags插件
首先使用**ctags -R**在当前目录下生成tags文件。然后再次用vim编辑文件的时候，即可实现函数和宏跳转。  
使用`<Ctrl>-]`可以跳转到函数，宏定义处。
